@using HKQTravellingAuthenication.Components
@model HKQTravellingAuthenication.Components.CategorySidebar.CategorySidebarData
@{
    int level = Model.level; 
}
@if (Model.categories.Count > 0)
{ 
    @if(level == 0){
        @Html.Raw("<div class=\"categorysidebar\">");
           <h3>
              <a asp-controller="ViewPost" asp-action="Index" asp-route-categoryslug="">
                Tất cả chuyên mục
            </a>
           </h3>
    }
<ul>
    @foreach(var Category in Model.categories){
        var cssActive = (Category.Slug == Model.categoryslug) ?"active" : null; //nếu bằng thì active nếu khác thì null
        <li>
            @* //nếu đang chọn thì gán cssActive *@
            <a class="@cssActive" asp-controller="ViewPost" asp-action="Index" asp-route-categoryslug="@Category.Slug">  
                @Category.Title
            </a>
            @if(Category.CategoryChildren?.Count > 0) // nếu đéme có thêm category con thì sẽ add vô thêm và xếp theo thứ tự level
            {
                @await Component.InvokeAsync("HKQTravellingAuthenication.Components.CategorySidebar",
                        new CategorySidebar.CategorySidebarData()
                        {
                            categories = Category.CategoryChildren.ToList(),
                            level = level + 1,   
                            categoryslug = ViewBag.categoryslug,
                        })
        }
        </li>
    }
</ul>
  if(level == 0){
        Html.Raw("</div>");
    }
}